(this.webpackJsonpmumble=this.webpackJsonpmumble||[]).push([[0],{34:function(e,t,s){},36:function(e,t,s){},47:function(e,t,s){},48:function(e,t,s){},49:function(e,t,s){},50:function(e,t,s){},51:function(e,t,s){},52:function(e,t,s){},53:function(e,t,s){},54:function(e,t,s){"use strict";s.r(t);var a=s(3),c=s.n(a),n=s(27),o=s.n(n),i=(s(34),s(5)),l=s(9),r=s(10),d=s(2),u=Object(a.createContext)(),m=function(e){var t=e.reducer,s=e.initialState,c=e.children;return Object(d.jsx)(u.Provider,{value:Object(a.useReducer)(t,s),children:c})},j=function(){return Object(a.useContext)(u)},b=(s(36),s(15)),p=b.a.initializeApp({apiKey:"AIzaSyBvkUMaV-U3zLS32we1Gpxc2i9eIseb3Ac",authDomain:"mumble-f5b70.firebaseapp.com",databaseURL:"https://mumble-f5b70-default-rtdb.firebaseio.com",projectId:"mumble-f5b70",storageBucket:"mumble-f5b70.appspot.com",messagingSenderId:"595927879007",appId:"1:595927879007:web:d39701c23e30aedda0faea",measurementId:"G-WD2GDSWNWW"}).firestore(),h=b.a.auth(),f=new b.a.auth.GoogleAuthProvider,O=b.a.storage();var g=function(){var e=j(),t=Object(i.a)(e,1)[0].user;return Object(a.useEffect)((function(){var e=document.querySelector("#themeToggle i"),t=localStorage.getItem("theme");"light"===t&&(e.classList.add("fa-sun"),e.classList.remove("fa-moon"),document.querySelector("body").classList.add(t)),e.addEventListener("click",(function(){e.classList.contains("fa-moon")?(e.classList.add("fa-sun"),e.classList.remove("fa-moon"),localStorage.setItem("theme","light")):(e.classList.add("fa-moon"),e.classList.remove("fa-sun"),localStorage.clear()),document.querySelector("body").classList.toggle("light")}))}),[]),Object(d.jsxs)("div",{className:"header",children:[Object(d.jsx)(l.b,{className:"link headerTitle",to:"/",children:Object(d.jsx)("h1",{className:"headerLogo",children:"MUMBLE"})}),Object(d.jsxs)("div",{className:"headerSearchContainer",children:[Object(d.jsx)("input",{className:"headerSearchInput",type:"text"}),Object(d.jsx)("i",{className:"fas fa-search headerSearchIcon"})]}),Object(d.jsx)("div",{className:"break"}),Object(d.jsxs)("div",{className:"headerNavContainer",children:[Object(d.jsx)(l.b,{to:"/",className:"link headerOptionBasket",children:Object(d.jsx)("div",{className:"headerOptionBasket",children:Object(d.jsx)("i",{className:"fas fa-home"})})}),Object(d.jsx)(l.b,{to:"/chat",className:"link headerOptionBasket",onClick:function(e){e.preventDefault(),window.open("https://minor-8e390.web.app")},children:Object(d.jsx)("div",{className:"headerOptionBasket",children:Object(d.jsx)("i",{className:"far fa-comments"})})}),Object(d.jsx)(l.b,{to:"/profile/".concat(null===t||void 0===t?void 0:t.email),className:"link headerOptionBasket",children:Object(d.jsx)("div",{className:"headerOptionBasket",children:t&&Object(d.jsx)("img",{className:" headerAvatar",src:(null===t||void 0===t?void 0:t.photoURL)||"https://avatars.dicebear.com/api/gridy/".concat(null===t||void 0===t?void 0:t.email,".svg"),alt:null===t||void 0===t?void 0:t.email,title:null===t||void 0===t?void 0:t.email})})}),Object(d.jsx)(l.b,{to:t?"":"/login",className:"link headerOptionBasket",children:Object(d.jsx)("div",{onClick:function(){t&&h.signOut()},children:Object(d.jsxs)("span",{className:"headerOption",children:[Object(d.jsx)("span",{className:"headerOptionLineOne",children:t?t.email.split("@")[0]:"Hello Guest"}),Object(d.jsx)("span",{className:"headerOptionLineTwo",children:t?"Sign Out":"Sign In"})]})})})]}),Object(d.jsx)("div",{id:"themeToggle",className:"headerTheme",children:Object(d.jsx)("i",{className:"far fa-moon"})})]})};s(47);var x=function(){var e=Object(r.g)(),t=Object(a.useState)(""),s=Object(i.a)(t,2),c=s[0],n=s[1],o=Object(a.useState)(""),u=Object(i.a)(o,2),m=u[0],j=u[1],b=Object(a.useState)(),p=Object(i.a)(b,2);return p[0],p[1],Object(a.useEffect)((function(){document.title="Login | Mumble"}),[]),Object(d.jsx)("div",{className:"login",children:Object(d.jsxs)("div",{className:"loginContainer",children:[Object(d.jsx)(l.b,{to:"/",className:"link",children:Object(d.jsx)("h1",{className:"loginLogo",children:"MUMBLE"})}),Object(d.jsx)("h1",{children:"\u2764 Welcome \u2764"}),Object(d.jsxs)("form",{children:[Object(d.jsx)("h5",{children:"E-mail"}),Object(d.jsx)("input",{type:"text",value:c,onChange:function(e){return n(e.target.value)}}),Object(d.jsx)("h5",{children:"Password"}),Object(d.jsx)("input",{type:"password",value:m,onChange:function(e){return j(e.target.value)}}),Object(d.jsx)("button",{type:"submit",onClick:function(t){t.preventDefault(),h.signInWithEmailAndPassword(c,m).then((function(t){e.push("/")})).catch((function(e){return alert(e.message)}))},className:"loginSignInButton",children:"Sign In"})]}),Object(d.jsx)("button",{className:"loginRegisterButton",onClick:function(t){t.preventDefault(),h.createUserWithEmailAndPassword(c,m).then((function(t){t&&e.push("/")})).catch((function(e){return alert(e.message)}))},children:"Sign Up"}),Object(d.jsx)("br",{}),Object(d.jsx)("h5",{children:"\u2764 OR \u2764"}),Object(d.jsxs)("button",{onClick:function(){h.signInWithPopup(f).then((function(t){e.push("/")})).catch((function(e){alert(e.message)}))},className:"loginSignInButtonGoogle",children:[Object(d.jsx)("i",{className:"fab fa-google"})," Sign In with Google"]}),Object(d.jsx)("p",{children:"Disclaimer: This is a fake social media platform called Mumble. This was created for demo purposes only. Do not take any posts seriously as they are unmonitored and may not be from real users. If you want to try this app without using your personal information use any annonymous credentials .Have a good time here .Happy Mumblling ."})]})})};s(48);var v=function(e){var t=e.postId,s=e.post,c=e.user,n=Object(a.useState)([]),o=Object(i.a)(n,2),r=o[0],u=o[1],m=Object(a.useState)([]),j=Object(i.a)(m,2),h=j[0],f=j[1],O=Object(a.useState)(""),g=Object(i.a)(O,2),x=g[0],v=g[1],N=Object(a.useState)(!1),y=Object(i.a)(N,2),S=y[0],k=y[1],w=document.getElementById(t);return Object(a.useEffect)((function(){document.title="Home | Mumble"}),[]),Object(a.useEffect)((function(){t&&p.collection("posts").doc(t).collection("comments").orderBy("timestamp","asc").onSnapshot((function(e){e.docs.length>3&&k(!0),u(e.docs.slice(Math.max(e.docs.length-3,0)).map((function(e){return e.data()})))}))}),[t]),Object(a.useEffect)((function(){t&&c&&(p.collection("users").doc(c.email).collection("likes").onSnapshot((function(e){f(e.docs.map((function(e){return e.id})))})),h.indexOf(t)>=0&&w.classList.add("fas"))}),[t,h.length,w,c,h]),s&&Object(d.jsxs)("div",{className:"post",children:[Object(d.jsxs)("div",{className:"postHeader",children:[Object(d.jsx)("img",{className:"avatar",src:s.avatar,alt:s.username,title:s.username}),Object(d.jsx)(l.b,{to:"/profile/".concat(s.email),children:Object(d.jsx)("h3",{className:"postUsername",children:s.username})})]}),Object(d.jsx)(l.b,{to:"/post/".concat(t),children:Object(d.jsx)("img",{className:"postImage",src:s.imageUrl,alt:t})}),Object(d.jsxs)("div",{className:"postInteractionBar",children:[Object(d.jsx)("i",{onClick:function(){t&&c&&(w.classList.toggle("fas"),w.classList.contains("fas")?p.collection("users").doc(c.email).collection("likes").doc(t).set({post:t}):p.collection("users").doc(c.email).collection("likes").doc(t).delete().then((function(){console.log("Unliked Photo!")})).catch((function(e){console.error("Error unliking: ",e)})))},id:t,className:"far fa-heart postInteractionItem postHeart"}),Object(d.jsx)(l.b,{to:"/post/".concat(t),children:Object(d.jsx)("i",{className:"far fa-comment postInteractionItem"})})]}),Object(d.jsxs)("div",{className:"postComments",children:[s.caption&&Object(d.jsxs)("p",{className:"postCaption",children:[Object(d.jsx)("strong",{children:Object(d.jsx)(l.b,{className:"commentLink",to:"/profile/".concat(s.email),children:s.username})})," ",s.caption]}),r.map((function(e,t){return Object(d.jsxs)("p",{className:"postCaption",children:[Object(d.jsx)("strong",{children:Object(d.jsx)(l.b,{className:"commentLink",to:"/profile/".concat(s.email),children:e.username})})," ",e.text]},t)})),Object(d.jsx)(l.b,{to:"/post/".concat(t),children:S&&Object(d.jsx)("p",{className:"postCaption postMoreComments",children:"See all comments ..."})})]}),c?Object(d.jsxs)("form",{className:"postCommentsInput",children:[Object(d.jsx)("input",{className:"postComment",type:"text",placeholder:"Add a Comment...",value:x,onChange:function(e){return v(e.target.value)}}),Object(d.jsx)("button",{className:"postCommentButton",type:"submit",disabled:!x,onClick:function(e){e.preventDefault(),p.collection("posts").doc(t).collection("comments").add({text:x,username:c.displayName||c.email.split("@")[0],timestamp:b.a.firestore.FieldValue.serverTimestamp()}),v("")},children:" Post "})]}):""]})};s(49);var N=function(){var e=Object(r.h)().id,t=Object(a.useState)([]),s=Object(i.a)(t,2),c=s[0],n=s[1],o=Object(a.useState)(""),u=Object(i.a)(o,2),m=u[0],h=u[1],f=Object(a.useState)([]),O=Object(i.a)(f,2),g=O[0],x=O[1],v=Object(a.useState)({}),N=Object(i.a)(v,2),y=N[0],S=N[1],k=j(),w=Object(i.a)(k,1)[0].user,I=document.getElementById(e);return Object(a.useEffect)((function(){document.title="".concat((null===y||void 0===y?void 0:y.username)+" "+(null===y||void 0===y?void 0:y.caption)," | Mumble")}),[null===y||void 0===y?void 0:y.caption,null===y||void 0===y?void 0:y.username]),Object(a.useEffect)((function(){e&&p.collection("posts").doc(e).collection("comments").orderBy("timestamp","asc").onSnapshot((function(e){n(e.docs.map((function(e){return e.data()})))}))}),[e]),Object(a.useEffect)((function(){e&&p.collection("posts").doc(e).get().then((function(e){S(e.data())}))}),[e]),Object(a.useEffect)((function(){e&&w&&(p.collection("users").doc(w.email).collection("likes").onSnapshot((function(e){x(e.docs.map((function(e){return e.id})))})),g.indexOf(e)>=0&&I.classList.add("fas"))}),[e,g.length,I,w,g]),y&&Object(d.jsx)("div",{className:"singlePostContainer",children:Object(d.jsxs)("div",{className:"singlePost",children:[Object(d.jsx)("img",{className:"singlePostImage",src:y.imageUrl,alt:e}),Object(d.jsxs)("div",{className:"singlePostRight",children:[Object(d.jsxs)("div",{className:"postHeader",children:[Object(d.jsx)("img",{className:"avatar",src:y.avatar,alt:y.username,title:y.username}),Object(d.jsx)(l.b,{className:"commentLink",to:"/profile/".concat(y.email),children:Object(d.jsx)("h3",{className:"postUsername",children:y.username})})]}),Object(d.jsxs)("div",{className:"postComments singlePostComments",children:[y.caption&&Object(d.jsxs)("p",{className:"postCaption",children:[Object(d.jsx)("strong",{children:Object(d.jsx)(l.b,{className:"commentLink",to:"/profile/".concat(y.email),children:y.username})})," ",y.caption]}),c.map((function(e,t){return Object(d.jsxs)("p",{className:"postCaption",children:[Object(d.jsx)("strong",{children:Object(d.jsx)(l.b,{className:"commentLink",to:"/profile/".concat(y.email),children:e.username})})," ",e.text]},t)}))]}),Object(d.jsxs)("div",{className:"postInteractionBar singlePostInteractionBar",children:[Object(d.jsx)("i",{onClick:function(){e&&w&&(I.classList.toggle("fas"),I.classList.contains("fas")?p.collection("users").doc(w.email).collection("likes").doc(e).set({post:e}):p.collection("users").doc(w.email).collection("likes").doc(e).delete().then((function(){console.log("Unliked Photo!")})).catch((function(e){console.error("Error unliking: ",e)})))},id:e,className:"far fa-heart postInteractionItem postHeart"}),Object(d.jsx)("i",{className:"far fa-comment postInteractionItem"})]}),w?Object(d.jsxs)("form",{className:"postCommentsInput",children:[Object(d.jsx)("input",{className:"postComment",type:"text",placeholder:"Add a comment...",value:m,onChange:function(e){return h(e.target.value)}}),Object(d.jsx)("button",{className:"postCommentButton",type:"submit",disabled:!m,onClick:function(t){t.preventDefault(),p.collection("posts").doc(e).collection("comments").add({text:m,username:w.displayName||w.email.split("@")[0],timestamp:b.a.firestore.FieldValue.serverTimestamp()}),h("")},children:" Post "})]}):""]})]})})};s(50);var y=function(){var e,t,s,c=Object(r.h)().userid,n=Object(a.useState)([]),o=Object(i.a)(n,2),l=o[0],u=o[1],m=j(),b=Object(i.a)(m,1)[0].user;return Object(a.useEffect)((function(){var e;document.title="".concat(null===(e=l[0])||void 0===e?void 0:e.post.username," | Mumble")}),[null===(e=l[0])||void 0===e?void 0:e.post.username,l]),Object(a.useEffect)((function(){c&&c&&p.collection("posts").orderBy("timestamp","desc").onSnapshot((function(e){u(e.docs.filter((function(e){return e.data().email===c===!0})).map((function(e){return{id:e.id,post:e.data()}})))}))}),[c]),Object(d.jsxs)("div",{children:[Object(d.jsxs)("div",{className:"profileContainer",children:[Object(d.jsx)("img",{className:"profileAvatar",src:null===(t=l[0])||void 0===t?void 0:t.post.avatar,alt:"avatar"}),Object(d.jsx)("h2",{className:"profileName",children:null===(s=l[0])||void 0===s?void 0:s.post.username})]}),Object(d.jsx)("div",{className:"posts",children:l.map((function(e){var t=e.id,s=e.post;return Object(d.jsx)(v,{postId:t,user:b,post:s},t)}))})]})};s(51);var S=function(e){var t=e.user,s=Object(a.useState)(""),c=Object(i.a)(s,2),n=c[0],o=c[1],l=Object(a.useState)(null),r=Object(i.a)(l,2),u=r[0],m=r[1],j=Object(a.useState)(null),h=Object(i.a)(j,2),f=h[0],g=h[1],x=Object(a.useState)(!1),v=Object(i.a)(x,2),N=v[0],y=v[1],S=Object(a.useState)(""),k=Object(i.a)(S,2),w=k[0],I=k[1],C=Object(a.useState)(0),L=Object(i.a)(C,2),E=L[0],B=L[1],U=Object(a.useState)(""),P=Object(i.a)(U,2),A=(P[0],P[1]),M=function(){document.querySelector(".upload").style.display="none",document.querySelector(".filter").style.display="none"};return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{className:"addPostBtn",onClick:function(){document.querySelector(".upload").style.display="grid",document.querySelector(".filter").style.display="block"},children:Object(d.jsx)("i",{className:"fas fa-plus"})}),Object(d.jsx)("div",{className:"upload",children:Object(d.jsxs)("div",{className:"uploadContent",children:[f&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{className:"postHeader",children:Object(d.jsx)("h3",{className:"uploadPreview",children:"POST PREVIEW"})}),Object(d.jsx)("img",{className:"postImage",src:f,alt:w})]}),Object(d.jsx)("input",{className:"uploadCaption",type:"text",placeholder:"Enter a caption...",onChange:function(e){return o(e.target.value)},value:n}),Object(d.jsxs)("div",{className:"uploadButtons",children:[Object(d.jsxs)("label",{htmlFor:"file-upload",className:"customFileUpload",children:[Object(d.jsx)("i",{className:"fas fa-file-upload"})," Upload Image"]}),Object(d.jsx)("input",{id:"file-upload",type:"file",accept:"image/*",onChange:function(e){e.target.files[0]&&m(e.target.files[0]),g(URL.createObjectURL(e.target.files[0]));var t=e.target.value.toString().split("\\"),s=t[t.length-1];if(s.length>20&&(s=s.split(".")[0].substring(0,20)+"...."+s.split(".")[s.split(".").length-1]),I(s),y(!0),f){var a=f.type;["image/gif","image/jpeg","image/png"].includes(a)?(A(""),m(f)):(console.log("error"),A("error please upload a image file"))}}}),N&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{className:"fileName",children:w}),Object(d.jsx)("div",{className:"trashBtn",onClick:function(){y(!1),m(null),I(""),g(null)},children:Object(d.jsx)("i",{className:"fas fa-trash"})})]})]}),Object(d.jsx)("progress",{className:"uploadProgress",value:E,max:"100"}),Object(d.jsx)("button",{type:"submit",disabled:!f&&!n,onClick:function(){if(u){var e="".concat(u.name).concat(Math.floor(8999*Math.random())+1e3);O.ref("images/".concat(e)).put(u).on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);B(t)}),(function(e){console.log(e),alert(e.message)}),(function(){O.ref("images").child(e).getDownloadURL().then((function(e){p.collection("posts").add({timestamp:b.a.firestore.FieldValue.serverTimestamp(),avatar:t.photoURL||"https://avatars.dicebear.com/api/gridy/".concat(t.email,".svg"),caption:n,imageUrl:e,email:t.email,username:t.displayName||t.email.split("@")[0]}),B(0),o(""),m(null),I(""),g(null),y(!1),M(),document.getElementById("root").scrollIntoView({behavior:"smooth"})}))}))}else u||(p.collection("posts").add({timestamp:b.a.firestore.FieldValue.serverTimestamp(),avatar:t.photoURL||"https://avatars.dicebear.com/api/gridy/".concat(t.email,".svg"),caption:n,imageUrl:"https://cdn.pixabay.com/photo/2015/04/23/22/00/tree-736885__340.jpg",email:t.email,username:t.displayName||t.email.split("@")[0]}),B(0),o(""),m(null),I(""),g(null),y(!1),M(),document.getElementById("root").scrollIntoView({behavior:"smooth"}))},className:"postButton",children:"Post"}),Object(d.jsx)("div",{className:"closeBtn",onClick:M,children:Object(d.jsx)("i",{className:"fas fa-times"})})]})})]})};s(52);var k=function(){return Object(d.jsx)("footer",{id:"footer",className:"footer",children:Object(d.jsxs)("p",{children:["Made with \u2764 by: -",Object(d.jsx)("a",{href:"https://github.com/naditya98",target:"_blank",rel:"noopener noreferrer",children:"Aditya \u2764 Ankita \u2764 Anubhav "}),Object(d.jsx)("br",{})]})})};s(53);var w=function(){var e=j(),t=Object(i.a)(e,2),s=t[0].user,c=t[1],n=Object(a.useState)([]),o=Object(i.a)(n,2),u=o[0],m=o[1];return Object(a.useEffect)((function(){p.collection("posts").orderBy("timestamp","desc").onSnapshot((function(e){m(e.docs.map((function(e){return{id:e.id,post:e.data()}})))}))}),[]),Object(a.useEffect)((function(){h.onAuthStateChanged((function(e){c(e?{type:"SET_USER",user:e}:{type:"SET_USER",user:null})}))}),[c]),Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)("div",{className:"filter"}),Object(d.jsx)(l.a,{children:Object(d.jsxs)(r.d,{children:[Object(d.jsxs)(r.b,{exact:!0,path:"/login",children:[Object(d.jsx)(g,{}),Object(d.jsx)(x,{}),Object(d.jsx)(k,{})]}),Object(d.jsxs)(r.b,{exact:!0,path:"/post/:id",children:[Object(d.jsx)(g,{}),Object(d.jsx)(N,{}),s?Object(d.jsx)(S,{user:s}):"",Object(d.jsx)(k,{})]}),Object(d.jsxs)(r.b,{exact:!0,path:"/profile/:userid",children:[Object(d.jsx)(g,{}),Object(d.jsx)(y,{}),s?Object(d.jsx)(S,{user:s}):"",Object(d.jsx)(k,{})]}),Object(d.jsxs)(r.b,{exact:!0,path:"/",children:[Object(d.jsx)(g,{}),Object(d.jsx)("div",{className:"posts",children:u.map((function(e){var t=e.id,a=e.post;return Object(d.jsx)(v,{postId:t,user:s,post:a},t)}))}),s?Object(d.jsx)(S,{user:s}):"",Object(d.jsx)(k,{})]}),Object(d.jsx)(r.b,{children:Object(d.jsx)(r.a,{to:"/"})})]})})]})},I=s(25),C=function(e,t){switch(t.type){case"SET_USER":return Object(I.a)(Object(I.a)({},e),{},{user:t.user});default:return e}},L=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function E(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var s=e.installing;null!=s&&(s.onstatechange=function(){"installed"===s.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}o.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(m,{initialState:{user:null},reducer:C,children:Object(d.jsx)(w,{})})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");L?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(s){var a=s.headers.get("content-type");404===s.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):E(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):E(t,e)}))}}({onUpdate:function(e){var t=e.waiting;t&&(t.addEventListener("statechange",(function(e){"activated"===e.target.state&&(alert("New Verison Found. Refressing..."),window.location.reload())})),t.postMessage({type:"SKIP_WAITING"}))}})}},[[54,1,2]]]);
//# sourceMappingURL=main.248f6f7a.chunk.js.map